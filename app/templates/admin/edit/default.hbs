<div class='edit'>
  <h2>Edit {{model.id}}</h2>

  <form>
    {{#each filteredColumns as |column|}}
    <div class='model-column {{column}}'>
        <label data-test={{concat 'form-label-' column}}>
          {{column}}
          {{admin-input record=this columnValue=column data-test=(concat 'edit-input-' column)}}
        </label>
      </div>
    {{/each}}

    {{async-button action=(action 'save') default='Save' pending='Saving...' fulfilled='Saved' rejected='Error' class='save' data-test='button-save'}}
    {{async-button action=(action 'destroyRecord') default='Delete' pending='Deleting...' fulfilled='Deleted' class='delete' data-test='button-delete'}}
    <button {{action 'cancel'}} class='cancel' data-test='button-cancel'>Cancel</button>
  </form>

  <div class='relationships'>
    <h2>Relationships</h2>

    {{#each belongsTo as |relationship|}}
    <h4 data-test='belongs-to-{{relationship.name}}'>{{relationship.name}}</h4>
      <!-- TODO: This shouldn't use a table for a to-one relationship -->
      {{model-records-table
        recordType=relationship.type
        records=relationship.records
        relationshipName=relationship.inverse
        relationshipId=model.id}}
    {{/each}}
    {{#each hasMany as |relationship|}}
      <h4 data-test='has-many-{{relationship.name}}'>
        {{#link-to
          'model-records.show.related'
          recordType
          model.id
          relationship.name
          }}
          {{relationship.name}}
        {{/link-to}}
      </h4>
    {{/each}}
  </div>
</div>
